services:
  - type: web
    name: laravel-api
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    autoDeploy: true

    # Variables de entorno para Laravel
    envVars:
      - key: APP_ENV
        value: production

      - key: APP_DEBUG
        value: false

      # APP_KEY NO se sube al repo, se sincroniza manualmente en Render
      - key: APP_KEY
        sync: false

      # Base de datos externa
      - key: DB_CONNECTION
        value: mysql
      - key: DB_HOST
        sync: false
      - key: DB_PORT
        value: 3306
      - key: DB_DATABASE
        sync: false
      - key: DB_USERNAME
        sync: false
      - key: DB_PASSWORD
        sync: false

    # Volumen persistente para storage y cache
    disk:
      name: laravel-storage
      mountPath: /var/www/html/storage
      sizeGB: 1